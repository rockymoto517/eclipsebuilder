new Map([["en-us","English (American)"],["ru-ru","русский"],["zh-cn","中文"]]);export default class e{constructor(e){this.dictionary,this.used,this.select=e}handleSelect(e,t){new URLSearchParams(window.location.search);return fetch("./lang/en-us.json").then((e=>e.json()))}loadDictionary(t){for(const r in t){const n=t[r];if("string"==typeof n){e.LOCATEREGEX.lastIndex=0;const[,...s]=e.LOCATEREGEX.exec(n)||[];if(0===s.length)continue;t[r]=t=>e.refFormat(e.replaceFormat(n,t.rep),t.ref)}else this.loadDictionary(n)}this.dictionary=t}get(e="",t=void 0){const r=e.split(".");let n=this.dictionary;for(const e of r)n=n[e];return void 0===n?t:n}static replaceFormat(e,t){for(const r in t)e=e.replace(new RegExp(`%{${r}}`,"g"),t[r]);return e}static refFormat(t,r){e.REFREGEX.lastIndex=0;const[,...n]=e.REFREGEX.exec(t)||[];if(Array.isArray(r)&&n.length!==r.length)throw new Error("The array should have the same amount of functions as the lang text has variable as!");for(let e=0;e<n.length;e++)t=t.replace(new RegExp(`&{${n[e]}}`),r[e](n[e]));return t}}e.LOCATEREGEX=/(%|&){(.+)}/g,e.REFREGEX=/&{(.+)}/g,e.ref=new Map([["system.credits.p2",{ref:[e=>`<a href="https://github.com/r-paydaybuilds/pd2builder/blob/master/CONTRIBUTORS.md">${e}</a>`]}],["system.credits.license",{ref:[e=>`<a href="https://opensource.org/licenses/MIT">${e}</a>`]}]]);
